<div class="p-6 bg-gray-100 min-h-screen">
  <h2 class="text-3xl font-bold mb-6 text-gray-800">My Uploaded Notes</h2>

  <div class="overflow-x-auto rounded-lg shadow-lg">
    <table class="min-w-full divide-y divide-gray-300 bg-white rounded-lg">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-6 py-3 text-left">Title</th>
          <th class="px-6 py-3 text-left">Description</th>
          <th class="px-6 py-3 text-left">Status</th>
          <th class="px-6 py-3 text-left">File</th>
          <th class="px-6 py-3 text-left">Class</th>
          <th class="px-6 py-3 text-left">Subject</th>
          <th class="px-6 py-3 text-left">Uploaded At</th>
          <th class="px-6 py-3 text-left">Action</th>
        </tr>
      </thead>

      <tbody class="bg-white divide-y divide-gray-200">
        <tr *ngFor="let note of mynotesdata">
          <td class="px-6 py-4 text-gray-900 font-medium">{{ note.title }}</td>
          <td class="px-6 py-4 text-gray-900">{{ note.description }}</td>
          <td class="px-6 py-4 text-gray-900">{{ note.status }}</td>
<td class="px-6 py-4">
  <!-- PDF File -->
  <ng-container *ngIf="isPDF(note.file); else imgPreview">
    <a [href]="note.file" target="_blank" class="text-blue-600 hover:underline">
      View PDF
    </a>
  </ng-container>

  <!-- Image File -->
  <ng-template #imgPreview>
    <a *ngIf="note.file" [href]="note.file" target="_blank">
      <img
        [src]="note.file"
        class="h-16 w-16 object-cover rounded border hover:scale-105 transition-transform"
      />
    </a>
  </ng-template>
</td>



          <td class="px-6 py-4 text-gray-900">{{ note.ClassName }}</td>
          <td class="px-6 py-4 text-gray-900">{{ note.Subject }}</td>
          <td class="px-6 py-4 text-gray-900">{{ note.uploadedAt | date:'short' }}</td>

          <td class="px-6 py-4 flex gap-2">
            <button
              class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
              (click)="openEditModal(note)"
            >
              Edit
            </button>
            <button
              class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
              (click)="deleteNote(note._id)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Edit Modal -->
  <div
    *ngIf="editingNote"
    class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"
  >
    <div class="bg-white p-6 rounded-xl w-96 shadow-xl">
      <h2 class="text-xl font-bold mb-4">Edit Note</h2>

      <label class="block mb-1 font-medium">Title</label>
      <input
        type="text"
        [(ngModel)]="editingNote.title"
        class="w-full p-2 border rounded mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <label class="block mb-1 font-medium">Description</label>
      <textarea
        rows="3"
        [(ngModel)]="editingNote.description"
        class="w-full p-2 border rounded mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
      ></textarea>

      <label class="block mb-1 font-medium">Class Name</label>
      <input
        type="text"
        [(ngModel)]="editingNote.ClassName"
        class="w-full p-2 border rounded mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <label class="block mb-1 font-medium">Upload New File (Optional)</label>
      <input
        type="file"
        class="mb-3"
        (change)="onFileSelected($event)"
      />

      <div class="flex justify-end gap-3 mt-4">
        <button
          class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"
          (click)="closeEditModal()"
        >
          Cancel
        </button>
        <button
          class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          (click)="saveEdit()"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>
